# Потоковое распознавание речи с GigaAM

Этот проект предоставляет возможность потокового распознавания речи с микрофона используя модель GigaAM.

## Установка зависимостей

```bash
# Установка необходимых пакетов
uv add sounddevice numpy
```

## Использование

### Простое использование

```python
from advanced_streaming_asr import AdvancedStreamingASR

# Создаем экземпляр
asr = AdvancedStreamingASR(
    model_name="ctc",
    sample_rate=16000,
    silence_threshold=0.01,
    silence_duration=1.0
)

# Запускаем распознавание
asr.start()
```

### С пользовательским callback

```python
def my_callback(text: str):
    print(f"Распознано: {text}")

asr = AdvancedStreamingASR(
    callback=my_callback,
    verbose=True
)

asr.start()
```

### Настройки параметров

- `model_name`: Название модели GigaAM ("ctc" или "rnnt")
- `sample_rate`: Частота дискретизации (по умолчанию 16000)
- `silence_threshold`: Порог тишины для определения конца речи (0.01)
- `silence_duration`: Длительность тишины для завершения сегмента (1.0)
- `min_audio_duration`: Минимальная длительность аудио для обработки (0.5)
- `max_audio_duration`: Максимальная длительность аудио для обработки (30.0)
- `callback`: Функция обратного вызова для результатов
- `verbose`: Подробный вывод (True/False)

## Файлы проекта

- `streaming_asr.py` - Базовая версия потокового ASR
- `advanced_streaming_asr.py` - Продвинутая версия с дополнительными возможностями
- `example_usage.py` - Примеры использования
- `main.py` - Оригинальный пример работы с файлом

## Запуск

### Базовый запуск
```bash
uv run python advanced_streaming_asr.py
```

### Запуск с примерами
```bash
uv run python example_usage.py
```

## Особенности

1. **Автоматическое сегментирование**: Система автоматически определяет начало и конец речи
2. **Многопоточность**: Обработка аудио происходит в отдельном потоке
3. **Статистика**: Ведется статистика работы системы
4. **Гибкая настройка**: Множество параметров для настройки под ваши нужды
5. **Обработка ошибок**: Надежная обработка ошибок и исключений

## Требования к системе

- Python 3.8+
- Микрофон
- Достаточно памяти для загрузки модели GigaAM

## Устранение неполадок

### Проблемы с микрофоном
```bash
# Проверка доступных устройств
python -c "import sounddevice as sd; print(sd.query_devices())"
```

### Проблемы с памятью
- Уменьшите `max_audio_duration`
- Используйте CPU вместо GPU: `device="cpu"`

### Настройка чувствительности
- Увеличьте `silence_threshold` если система слишком чувствительна
- Уменьшите `silence_duration` для более быстрого реагирования

## Лицензия

MIT License
